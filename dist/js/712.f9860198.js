"use strict";(self["webpackChunkvue3_music"]=self["webpackChunkvue3_music"]||[]).push([[712],{1114:function(e,t,a){a.d(t,{$J:function(){return i},A5:function(){return s},FT:function(){return n},gg:function(){return o}});var l=a(7841);function i(e){return(0,l.Z)({url:"/banner",method:"get",parmas:e})}function n(){return(0,l.Z)({url:"/personalized",method:"get",params:{limit:9}})}function o(){return(0,l.Z)({url:"/personalized/newsong",method:"get",params:{limit:15}})}function s(e){return(0,l.Z)({url:"/playlist/detail",method:"get",params:{id:e}})}},1712:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var l=a(2041),i=a(5551),n=a(440),o=a(4367),s=a(6302),r=a(2485),c=a(8283),u=a(5651),v=a(5966),d=a(8232),p=a(7701),h=a(2826);const[m,f]=(0,s["do"])("swipe"),g={loop:r.J5,width:r.Or,height:r.Or,vertical:Boolean,autoplay:(0,r.SI)(0),duration:(0,r.SI)(500),touchable:r.J5,lazyRender:Boolean,initialSwipe:(0,r.SI)(0),indicatorColor:String,showIndicators:r.J5,stopPropagation:r.J5},w=Symbol(m);var y=(0,n.aZ)({name:m,props:g,emits:["change"],setup(e,{emit:t,slots:a}){const l=(0,o.iH)(),i=(0,o.qj)({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),s=(0,d.o)(),{children:r,linkChildren:m}=(0,v.$E)(w),g=(0,n.Fl)((()=>r.length)),y=(0,n.Fl)((()=>i[e.vertical?"height":"width"])),_=(0,n.Fl)((()=>e.vertical?s.deltaY.value:s.deltaX.value)),b=(0,n.Fl)((()=>{if(i.rect){const t=e.vertical?i.rect.height:i.rect.width;return t-y.value*g.value}return 0})),F=(0,n.Fl)((()=>Math.ceil(Math.abs(b.value)/y.value))),C=(0,n.Fl)((()=>g.value*y.value)),k=(0,n.Fl)((()=>(i.active+g.value)%g.value)),Y=(0,n.Fl)((()=>{const t=e.vertical?"vertical":"horizontal";return s.direction.value===t})),z=(0,n.Fl)((()=>{const t={transitionDuration:`${i.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${i.offset}px)`};if(y.value){const a=e.vertical?"height":"width",l=e.vertical?"width":"height";t[a]=`${C.value}px`,t[l]=e[l]?`${e[l]}px`:""}return t})),D=t=>{const{active:a}=i;return t?e.loop?(0,c.uZ)(a+t,-1,g.value):(0,c.uZ)(a+t,0,F.value):a},$=(t,a=0)=>{let l=t*y.value;e.loop||(l=Math.min(l,-b.value));let i=a-l;return e.loop||(i=(0,c.uZ)(i,b.value,0)),i},Z=({pace:a=0,offset:l=0,emitChange:n})=>{if(g.value<=1)return;const{active:o}=i,s=D(a),c=$(s,l);if(e.loop){if(r[0]&&c!==b.value){const e=c<b.value;r[0].setOffset(e?C.value:0)}if(r[g.value-1]&&0!==c){const e=c>0;r[g.value-1].setOffset(e?-C.value:0)}}i.active=s,i.offset=c,n&&s!==o&&t("change",k.value)},S=()=>{i.swiping=!0,i.active<=-1?Z({pace:g.value}):i.active>=g.value&&Z({pace:-g.value})},x=()=>{S(),s.reset(),(0,v.d1)((()=>{i.swiping=!1,Z({pace:-1,emitChange:!0})}))},P=()=>{S(),s.reset(),(0,v.d1)((()=>{i.swiping=!1,Z({pace:1,emitChange:!0})}))};let T;const j=()=>clearTimeout(T),I=()=>{j(),e.autoplay>0&&g.value>1&&(T=setTimeout((()=>{P(),I()}),+e.autoplay))},W=(t=+e.initialSwipe)=>{if(!l.value)return;const a=()=>{var a,n;if(!(0,u.xj)(l)){const t={width:l.value.offsetWidth,height:l.value.offsetHeight};i.rect=t,i.width=+(null!=(a=e.width)?a:t.width),i.height=+(null!=(n=e.height)?n:t.height)}g.value&&(t=Math.min(g.value-1,t)),i.active=t,i.swiping=!0,i.offset=$(t),r.forEach((e=>{e.setOffset(0)})),I()};(0,u.xj)(l)?(0,n.Y3)().then(a):a()},J=()=>W(i.active);let M;const H=t=>{e.touchable&&(s.start(t),M=Date.now(),j(),S())},O=t=>{e.touchable&&i.swiping&&(s.move(t),Y.value&&((0,u.PF)(t,e.stopPropagation),Z({offset:_.value})))},U=()=>{if(!e.touchable||!i.swiping)return;const t=Date.now()-M,a=_.value/t,l=Math.abs(a)>.25||Math.abs(_.value)>y.value/2;if(l&&Y.value){const t=e.vertical?s.offsetY.value:s.offsetX.value;let a=0;a=e.loop?t>0?_.value>0?-1:1:0:-Math[_.value>0?"ceil":"floor"](_.value/y.value),Z({pace:a,emitChange:!0})}else _.value&&Z({pace:0});i.swiping=!1,I()},q=(t,a={})=>{S(),s.reset(),(0,v.d1)((()=>{let l;l=e.loop&&t===g.value?0===i.active?0:t:t%g.value,a.immediate?(0,v.d1)((()=>{i.swiping=!1})):i.swiping=!1,Z({pace:l-i.active,emitChange:!0})}))},K=(t,a)=>{const l=a===k.value,i=l?{backgroundColor:e.indicatorColor}:void 0;return(0,n.Wm)("i",{style:i,class:f("indicator",{active:l})},null)},R=()=>a.indicator?a.indicator({active:k.value,total:g.value}):e.showIndicators&&g.value>1?(0,n.Wm)("div",{class:f("indicators",{vertical:e.vertical})},[Array(g.value).fill("").map(K)]):void 0;return(0,p.F)({prev:x,next:P,state:i,resize:J,swipeTo:q}),m({size:y,props:e,count:g,activeIndicator:k}),(0,n.YP)((()=>e.initialSwipe),(e=>W(+e))),(0,n.YP)(g,(()=>W(i.active))),(0,n.YP)((()=>e.autoplay),I),(0,n.YP)([u.bn,u.uK],J),(0,n.YP)((0,v.d9)(),(e=>{"visible"===e?I():j()})),(0,n.bv)(W),(0,n.dl)((()=>W(i.active))),(0,h.h)((()=>W(i.active))),(0,n.se)(j),(0,n.Jd)(j),()=>{var t;return(0,n.Wm)("div",{ref:l,class:f()},[(0,n.Wm)("div",{style:z.value,class:f("track",{vertical:e.vertical}),onTouchstart:H,onTouchmove:O,onTouchend:U,onTouchcancel:U},[null==(t=a.default)?void 0:t.call(a)]),R()])}}});const _=(0,i.n)(y);a(9196);const[b,F]=(0,s["do"])("swipe-item");var C=(0,n.aZ)({name:b,setup(e,{slots:t}){let a;const l=(0,o.qj)({offset:0,inited:!1,mounted:!1}),{parent:i,index:s}=(0,v.NB)(w);if(!i)return void 0;const r=(0,n.Fl)((()=>{const e={},{vertical:t}=i.props;return i.size.value&&(e[t?"height":"width"]=`${i.size.value}px`),l.offset&&(e.transform=`translate${t?"Y":"X"}(${l.offset}px)`),e})),c=(0,n.Fl)((()=>{const{loop:e,lazyRender:t}=i.props;if(!t||a)return!0;if(!l.mounted)return!1;const n=i.activeIndicator.value,o=i.count.value-1,r=0===n&&e?o:n-1,c=n===o&&e?0:n+1;return a=s.value===n||s.value===r||s.value===c,a})),u=e=>{l.offset=e};return(0,n.bv)((()=>{(0,n.Y3)((()=>{l.mounted=!0}))})),(0,p.F)({setOffset:u}),()=>{var e;return(0,n.Wm)("div",{class:F(),style:r.value},[c.value?null==(e=t.default)?void 0:e.call(t):null])}}});const k=(0,i.n)(C);var Y=a(8643),z=a(4804),D=a(1114),$=a(7266);const Z=e=>((0,n.dD)("data-v-1daacab9"),e=e(),(0,n.Cn)(),e),S={class:"recommend"},x=Z((()=>(0,n._)("p",{class:"recommend-top"},"热门",-1))),P={class:"swiper-container"},T=["src"],j={class:"recommend-playlist"},I=Z((()=>(0,n._)("div",{class:"remd-header"},[(0,n._)("p",{class:"recommend-top"},"热门歌单推荐")],-1))),W={class:"remd-playlist"},J=["onClick"],M={alt:"封面",class:"cover"},H={class:"name"},O={class:"recommend-newsong"},U=Z((()=>(0,n._)("div",{class:"remd-header"},[(0,n._)("p",{class:"recommend-top"},"推荐新歌")],-1))),q={class:"remd-newsong"},K=["onClick"],R={alt:"图片",class:"cover"},X={class:"info"},B={class:"name"},A={class:"zuthor"};var E={__name:"Recommend",setup(e){const t=(0,o.qj)([]),a=(0,o.qj)([]),i=(0,o.qj)([]);let s=(0,z.tv)([]),r=(0,$.oR)();(0,n.bv)((()=>{u(),c(),v()}));let c=()=>{(0,D.$J)({type:2}).then((e=>{t.push(...e.data.banners)})).catch((e=>{console.log("请求出错")}))},u=()=>{(0,D.FT)().then((e=>{a.push(...e.data.result)})).catch((e=>{console.log("请求歌单数据失败")}))},v=()=>{(0,D.gg)().then((e=>{i.push(...e.data.result)})).catch((e=>{console.log("请求歌单数据失败")}))},d=e=>{s.push(`/m/playList/${e}`)};function p({id:e,name:t,picUrl:a,song:l}){r.dispatch("addSongPlay",{id:e,name:t,picUrl:a,ar:l.artists})}return(e,s)=>{const r=k,c=_,u=l.Z,v=(0,n.Q2)("loadingimg");return(0,n.wg)(),(0,n.iD)("div",S,[x,(0,n._)("div",P,[(0,n.Wm)(c,{class:"remd-swiper",autoplay:3e3,"indicator-color":"red","lazy-render":""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e},{default:(0,n.w5)((()=>[(0,n._)("img",{src:e.imageUrl,alt:"图片"},null,8,T)])),_:2},1024)))),128))])),_:1})]),(0,n._)("section",j,[I,(0,n._)("u",W,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t,onClick:t=>(0,o.SU)(d)(e.id)},[(0,n.wy)((0,n._)("img",M,null,512),[[v,e.picUrl]]),(0,n._)("p",H,(0,Y.zw)(e.name),1)],8,J)))),128))])]),(0,n._)("section",O,[U,(0,n._)("u",q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t,onClick:t=>p(e)},[(0,n.wy)((0,n._)("img",R,null,512),[[v,e.picUrl]]),(0,n._)("div",X,[(0,n._)("p",B,(0,Y.zw)(e.name),1),(0,n._)("p",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.song.artists,((e,t)=>((0,n.wg)(),(0,n.iD)("span",{key:t},(0,Y.zw)(e.name),1)))),128))]),(0,n.Wm)(u,{class:"icon",width:"25",height:"25",iconFileName:"playmusic"})])],8,K)))),128))])])])}}},N=a(465);const L=(0,N.Z)(E,[["__scopeId","data-v-1daacab9"]]);var Q=L}}]);
//# sourceMappingURL=712.f9860198.js.map