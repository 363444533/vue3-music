{"version":3,"file":"js/641.9c1c2f9b.js","mappings":"+NAEO,SAASA,EAAUC,GACtB,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,UACLC,OAAO,MACPC,OAAO,CACHJ,aAGX,CAEM,SAASK,IACZ,OAAOJ,EAAAA,EAAAA,GAAQ,CACXC,IAAK,cACLC,OAAO,OAEd,CAEM,SAASG,IACZ,OAAOL,EAAAA,EAAAA,GAAQ,CACXC,IAAK,kBACLC,OAAO,OAEd,C,kCCtBD,MAAMI,EAAeC,KAAM,QAAa,mBAAoBA,EAAIA,KAAK,UAAeA,GAE9EC,EAAa,CACjBC,MAAO,UAEHC,EAAa,CACjBD,MAAO,gBAEHE,EAAa,CAAC,eACdC,EAAa,CACjBC,IAAK,EACLJ,MAAO,cAGHK,EAA0BR,GAAa,KAAmB,IAAAS,GAAoB,IAAK,CACvFN,MAAO,SACN,QAAS,KAENO,EAAa,CACjBP,MAAO,WAEHQ,EAAa,CAAC,WACdC,EAAa,CACjBL,IAAK,EACLJ,MAAO,iBAEHU,EAAa,CAAC,WAEdC,GAA2B,QAAiB,OAOlD,OACEC,OAAQ,SAERC,MAAMC,GACJ,IAAIC,GAAQ,QAAI,IACZC,GAAe,QAAI,IACnBC,GAAS,QAAI,IACbC,GAAc,QAAI,IA4BtB,SAASC,EAAmBC,GAC1BL,EAAMM,MAAQD,CAChB,EA7BA,SAAM,IAAML,EAAMM,QAAOC,IACvBA,EAASA,EAAOC,OAEXD,IACHN,EAAaK,MAAQ,IAGvBhC,EAAUiC,GAAQE,MAAKC,IACrBT,EAAaK,MAAQI,EAAIC,KAAKC,OAAOC,KAAK,IACzCC,OAAMC,IACPC,QAAQC,IAAI,aAAa,GACzB,KAEJ,SAAU,KACRrC,IAAiB6B,MAAKC,IACpBR,EAAOI,MAAQI,EAAIC,KAAKC,OAAOM,KAC/BF,QAAQC,IAAIf,EAAOI,MAAM,IACxBQ,OAAMC,IACPC,QAAQC,IAAI,eAAe,IAE7BpC,IAAoB4B,MAAKC,IACvBP,EAAYG,MAAQI,EAAIC,KAAKA,KAAKQ,WAAW,IAC5CL,OAAMC,IACPC,QAAQC,IAAI,eAAe,GAC3B,IAOJ,IAAIG,GAAQ,UAEZ,SAASC,GAAW,GAClBC,EAAE,KACFC,EAAI,GACJC,EAAE,GACFC,KAGA,QAAaH,GAAIb,MAAKC,IACpB,IAAI,GACFY,EAAE,KACFC,EAAI,GACJC,EAAE,GACFC,GACEf,EAAIC,KAAKE,MAAM,GACnBO,EAAMM,SAAS,cAAe,CAC5BJ,KACAC,OACAI,OAAQH,EAAGG,OACXF,MACA,IACDX,OAAMC,IACPC,QAAQC,IAAI,SAAS,GAEzB,CAEA,MAAO,CAACW,EAAMC,KACZ,MAAMC,EAAqB,IAE3B,OAAO,WAAc,QAAoB,MAAO9C,EAAY,EAAC,IAAAO,GAAoB,MAAOL,EAAY,EAAC,QAAa4C,EAAoB,CACpIC,MAAO,KACPC,OAAQ,KACRC,aAAc,YACZ,SAAgB,IAAA1C,GAAoB,QAAS,CAC/C2C,KAAM,OACNjD,MAAO,eACP,sBAAuB4C,EAAO,KAAOA,EAAO,GAAKM,IAAU,QAAOnC,GAASA,EAAMM,MAAQ6B,EAASnC,EAAQmC,GAC1GhC,aAAa,QAAOA,IACnB,KAAM,EAAGhB,GAAa,CAAC,CAAC,MAAa,QAAOa,SAAa,QAAOC,GAAcmC,QAAU,IAAK,WAAc,QAAoB,MAAOhD,EAAY,CAACE,GAAY,IAAAC,GAAoB,KAAMC,EAAY,GAAE,SAAW,IAAO,QAAoB,KAAW,MAAM,SAAY,QAAOU,IAAS,CAACmC,EAAMC,MAC3R,WAAc,QAAoB,KAAM,CAC7CrD,MAAO,OACPI,IAAKiD,EACLC,QAASJ,GAAU/B,EAAmBiC,EAAKG,SAC1C,QAAiBH,EAAKG,OAAQ,EAAG/C,MAClC,aAAc,WAAc,QAAoB,MAAOC,EAAY,EAAC,QAAa+C,EAAA,EAAQ,CAC3FxD,MAAO,eACN,CACDyD,SAAS,SAAS,IAAM,EAAC,IAAAnD,GAAoB,KAAM,KAAM,GAAE,SAAW,IAAO,QAAoB,KAAW,MAAM,SAAY,QAAOU,IAAeoC,KAC3I,WAAc,QAAoB,KAAM,CAC7ChD,IAAKgD,EAAKf,GACViB,QAASJ,GAAUd,EAAWgB,IAC7B,EAAC,IAAA9C,GAAoB,OAAQ,MAAM,QAAiB8C,EAAKd,MAAO,GAAI3B,IAAc,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYyC,EAAKM,SAAS,CAACC,EAAON,MACrK,WAAc,QAAoB,OAAQ,CAC/CjD,IAAKiD,IACJ,QAAiBM,EAAMrB,MAAQ,IAAK,MACrC,OAAQ,EAAG5B,MACb,WACJJ,EAAG,QACE,CAEX,G,SCnIF,MAAMsD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue3-music/./src/api/search.js","webpack://vue3-music/./src/views/home-view/components/Search.vue","webpack://vue3-music/./src/views/home-view/components/Search.vue?4119"],"sourcesContent":["import request from \"@/untils/axios\"\r\n\r\nexport function getSearch(keywords){\r\n    return request({\r\n        url: '/search',\r\n        method:'get',\r\n        params:{\r\n            keywords\r\n        }\r\n    })\r\n}\r\n\r\nexport function getHoteKeyword(){\r\n    return request({\r\n        url: '/search/hot',\r\n        method:'get',\r\n    })\r\n}\r\n\r\nexport function getDefaultKeyword(){\r\n    return request({\r\n        url: '/search/default',\r\n        method:'get',\r\n    })\r\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, unref as _unref, isRef as _isRef, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d976c496\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"search\"\n};\nconst _hoisted_2 = {\n  class: \"search-inner\"\n};\nconst _hoisted_3 = [\"placeholder\"];\nconst _hoisted_4 = {\n  key: 0,\n  class: \"hot-topics\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"title\"\n}, \"热门搜索\", -1));\n\nconst _hoisted_6 = {\n  class: \"hotlist\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  key: 1,\n  class: \"search-result\"\n};\nconst _hoisted_9 = [\"onClick\"];\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" - \");\n\nimport { onMounted, ref, watch } from \"@vue/runtime-core\";\nimport { getSearch, getHoteKeyword, getDefaultKeyword } from \"@/api/search\";\nimport { getSongDtail } from \"@/api/song\";\nimport Scroll from \"@/components/Scroll.vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  __name: 'Search',\n\n  setup(__props) {\n    let query = ref(\"\");\n    let searchResult = ref([]);\n    let HotKey = ref([]);\n    let placeholder = ref([]);\n    watch(() => query.value, newVal => {\n      newVal = newVal.trim();\n\n      if (!newVal) {\n        searchResult.value = [];\n      }\n\n      getSearch(newVal).then(res => {\n        searchResult.value = res.data.result.songs;\n      }).catch(err => {\n        console.log(\"search信息失败\");\n      });\n    });\n    onMounted(() => {\n      getHoteKeyword().then(res => {\n        HotKey.value = res.data.result.hots;\n        console.log(HotKey.value);\n      }).catch(err => {\n        console.log(\"search热搜请求失败\");\n      });\n      getDefaultKeyword().then(res => {\n        placeholder.value = res.data.data.showKeyword;\n      }).catch(err => {\n        console.log(\"search热搜请求失败\");\n      });\n    });\n\n    function changeQueryKeyword(q) {\n      query.value = q;\n    }\n\n    let store = useStore();\n\n    function addOneSong({\n      id,\n      name,\n      al,\n      ar\n    }) {\n      // {id,name,picUrl,artists:song.artists}\n      getSongDtail(id).then(res => {\n        let {\n          id,\n          name,\n          al,\n          ar\n        } = res.data.songs[0];\n        store.dispatch(\"addSongPlay\", {\n          id,\n          name,\n          picUrl: al.picUrl,\n          ar\n        });\n      }).catch(err => {\n        console.log(\"歌曲请求失败\");\n      });\n    }\n\n    return (_ctx, _cache) => {\n      const _component_SvgIcon = _resolveComponent(\"SvgIcon\");\n\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_SvgIcon, {\n        width: \"20\",\n        height: \"20\",\n        iconFileName: \"search\"\n      }), _withDirectives(_createElementVNode(\"input\", {\n        type: \"text\",\n        class: \"search-input\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _isRef(query) ? query.value = $event : query = $event),\n        placeholder: _unref(placeholder)\n      }, null, 8, _hoisted_3), [[_vModelText, _unref(query)]])]), _unref(searchResult).length <= 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"ul\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(HotKey), (item, index) => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          class: \"item\",\n          key: index,\n          onClick: $event => changeQueryKeyword(item.first)\n        }, _toDisplayString(item.first), 9, _hoisted_7);\n      }), 128))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode(Scroll, {\n        class: \"scroll-wrap\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(searchResult), item => {\n          return _openBlock(), _createElementBlock(\"li\", {\n            key: item.id,\n            onClick: $event => addOneSong(item)\n          }, [_createElementVNode(\"span\", null, _toDisplayString(item.name), 1), _hoisted_10, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.artists, (aItem, index) => {\n            return _openBlock(), _createElementBlock(\"span\", {\n              key: index\n            }, _toDisplayString(aItem.name) + \" \", 1);\n          }), 128))], 8, _hoisted_9);\n        }), 128))])]),\n        _: 1\n      })]))]);\n    };\n  }\n\n};","/* unplugin-vue-components disabled */import script from \"./Search.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Search.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=d976c496&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\admin\\\\Downloads\\\\vue3-music\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d976c496\"]])\n\nexport default __exports__"],"names":["getSearch","keywords","request","url","method","params","getHoteKeyword","getDefaultKeyword","_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","key","_hoisted_5","_","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","__name","setup","__props","query","searchResult","HotKey","placeholder","changeQueryKeyword","q","value","newVal","trim","then","res","data","result","songs","catch","err","console","log","hots","showKeyword","store","addOneSong","id","name","al","ar","dispatch","picUrl","_ctx","_cache","_component_SvgIcon","width","height","iconFileName","type","$event","length","item","index","onClick","first","Scroll","default","artists","aItem","__exports__"],"sourceRoot":""}